### 互连网络

#### 概述

互连网（ICN）络概念

* 片上/系统高速互连网络是一种由网络元件按照一定的拓扑结构和控制方式构成的网络，用来实现计算机系统中部件之间的高速连接。
* 3大要素：网络元件，互连结构，控制方式
* 结点：处理器、存储模块或其它设备
* 在拓扑上，互连网络为输入结点到输出结点之间的一组互连或映象
  * 互连结构  是静态连接拓扑
  * 控制方式 是基于静态拓扑结构的动态传输机制



ICN目的与作用

* 互连网络与处理单元的连接模型

  * 处理单元/ 处理单元的连接

    <img src="https://img-blog.csdnimg.cn/20201225162649764.png" width="40%"/>

  * 处理单元/ 存储单元

    <img src="https://img-blog.csdnimg.cn/20201225162711618.png" width="40%" />

* 互连网络的主要操作：

  * 置换(N－N)

    <img src="https://img-blog.csdnimg.cn/20201225162739201.png" width="10%"/>

  * 广播(1 － N)

    <img src="https://img-blog.csdnimg.cn/20201225162801365.png" width="10%" />

  * 选播(1 － N’)

    <img src="https://img-blog.csdnimg.cn/20201225162824815.png" width="10%" />



互连网络的结构参数

* 网络通常是用有向边或无向边连接有限个结点的图来表示。 
* 互连网络的主要特性参数有：
  * 网络规模N：网络中结点的个数。
    * 表示该网络所能连接的部件的数量。
  * 结点度d：与结点相连接的边数（通道数），包括入度和出度。
    * 进入结点的边数叫 入度 。
    * 从结点出来的边数叫 出度
  * 结点距离：对于网络中的任意两个结点，从一个结点出发到另一个结点终止所需要跨越的边数的最小值。
  * 网络直径D：网络中任意两结点间距离的最大值。
    * 网络直径应当尽可能地小。
  * 等分宽度b：把由N个结点构成的网络切成结点数相同（N/2）的两半，在各种切法中，沿切口边数的最小值。
    * 线等分宽度：B ＝b  × w ， w 为通道宽度（用位表示）
    * 该参数主要反映了网络最大流量。
  * 对称性：从任何结点看到的拓扑结构都相同的网络称为对称网络。 对称网络比较容易实现，编程也比较容易。



互连网络的性能指标（时延和带宽）

* 通信时延
  * 指从源结点到目的结点传送一条消息所需的总时间。
  * = 软件开销+ 通道时延+ 选路时延+竞争时延 竞争时延
  * 通信延迟 = 发送开销+ 飞行时间 + 数据包大小/带宽 +接收开销
* 网络时延
  * 通道时延与选路时延的和。
  * 由网络硬件特征决定，与程序行为和网络传输状态无关。
* 端口带宽
  * 对于互连网络中任意一个端口来说，其端口带宽是指单位时间内从该端口传送到其他端口的最大信息量。
* 聚集带宽
  * 网络从一半结点向另一半结点传输时，单位时间内能够传送的最大信息量



#### 互连函数

互联函数概念

* 互连函数反映了网络输入数组和输出数组之间对应的置换，关系或排列关系（置换函数或排列函数）。

* 变量x：输入（设x=0，1，…，N－1）
  * 函数f(x)：输出

* 通过数学表达式描述输入端号与输出端号的连接关系。
  * 即在互连函数f的作用下，输入端x连接到输出端f(x)。



表示方式

* 四种

  * 枚举法 

    <img src="https://img-blog.csdnimg.cn/20201225161206186.png" width="10%"/>

  * 开关状态图 

    <img src="https://img-blog.csdnimg.cn/20201225161236159.png" width="15%" />

  * 列表法 

    <img src="https://img-blog.csdnimg.cn/20201225162603160.png" width="15%" />

  * 循环函数

    * 即：（$x_0$ $x_1$  $x_2$ … $x_{j-1}$ ）；表示： f($x_0$)=$x_1$ ，f($x_1$)=$x_2$ ，…，f($x_{j-1}$)=$x_0$，j 称为该循环的长度。
    * 设n=$log_2^N$，则可以用n位二进制来表示N个输入端和输出端的二进制地址，互连函数表示为：f（$x_{n-1}$ $x_{n-2}$ … $x_1$ $x_0$ ）

* 一个网络通过开关切换可以形成多个映射关系，所以要用“互连函数族”来定义一个网络。



#### 常用函数

* 说明：这里的输入指的输入口的二进制串，比如从 4 号输入，那么 100 经过反位序函数后 001 ，那么从 1 号端口输出



恒等函数

* 实现同号输入端和输出端之间的连接。
* I（xn-1 xn-2 …x1 x0 ）= xn-1 xn-2 …x1 x0



交换函数

* 实现二进制地址编码中第k位互反的输入端与输出端之间的连接。
* 交换函数主要用于构造立方体互连网络和各种超立方体互连网络。



均匀洗牌函数

* 将输入端分成数目相等的两半，前一半和后一半按类似均匀混洗扑克牌的方式交叉地连接到输出端（输出端相当于混洗的结果）。
* 也称为混洗函数（置换）， 混洗函数（置换），shuffle函数
* 即把输入端的 二进制编号循环左移一位 。



碟式函数

* 把输入端的二进制编号的最高位与最低位互换位置，便得到了输出端的编号。
* 蝶式变换与交换变换的多级组合是构成多级立方体网络的基础。



反位序函数

* 将输入端二进制编号的位序颠倒过来求得相应输出端的编号。



 移数函数

* 将各输入端都错开一定的位置（模N）后连到输出端。



PM2I函数

* 一种移数函数，将各输入端都错开一定的位置（模N）后连到输出端。
* PM2I互连网络共有2n个互连函数。





#### 静态互联网络

互连网络通常可以分为两大类：

* 静态互连网络
  * 各结点之间有固定的连接通路、且在运行中不能改变的网络。
* 动态互连网络
  * 由交换开关构成、可按运行程序的要求动态地改变连接状态的网络。



1、2维互连函数

* 线性阵列
  * 一种一维的线性网络，其中N个结点用N-1个链路连成一行。
* 环和带弦环
  * 环：用一条附加链路将线性阵列的两个端点连接起来而构成。可以单向工作，也可以双向工作。
  * 带弦环 增加的链路愈多，结点度愈高，网络直径就愈小。
  * 全连接网络
* 循环移数网络
  * 通过在环上每个结点到所有与其距离为2的整数幂的结点之间都增加一条附加链而构成。

* 树形和星形
  * 树形：一般，一棵k层完全平衡的二叉树有N=$2^k$ -1个结点。
  * 星形：结点度较高，为N－1
  * 胖树形
* 网格形和环网形
  * 一个由N=$n^k$ 个 结点构成的k 维网格形网络（每维n 个结点）的内部结点度d=2k ，网络直径D=k(n-1) 。 
  * 环形网：把2 维网格形网络的每一行的两个端结点连接起来，把每一列的两个端结点也连接起来。
* Illiac网络
  * 把2 维网格形网络的每一列的两个端结点连接起来，再把每一行的尾结点与下一行的头结点连接起来，并把最后一行的尾结点与第一行的头结点连接起来。





超立方体和寻径

* 一种二元n-立方体结构
  *  一般来说，一个二元n-立方体由N=$2^n$ 个结点组成，它们分布在n维上，每维有两个结点。
* 确定性寻径和自适应寻径
  * 确定性寻径：通信路径完全由源结点地址和目的地址来决定，也就是说，寻径路径是预先唯一地确定好了的，而与网络的状况无关
    * 二维网格网络的 二维网格网络的X-Y寻径 
    * N 元超方体的E-cube寻径
  * 自适应寻径：通信的通路每一次都要根据资源或者网络的情况来选择。
    * 具有拥塞控制，可以避开拥挤的或者有故障的结点，使网络的利用率得到改进
    * 例如： TCP/IP网络 



二维网格网络的X-Y寻径

* 先沿X 维方向进行寻径，然后再沿Y 维方向寻找路径
  * 任意一个 源结点： s= （x 1 ， y 1 ）、任意一个 目的结点： d=（x 2 ， y 2 ）
  * 从s 出发，先沿X 轴方向前进，直到找到d  所在的列x2 ；
  * 然后再沿Y 轴方向前进，直到找到目标结点（ x 2 ， y 2 ）
