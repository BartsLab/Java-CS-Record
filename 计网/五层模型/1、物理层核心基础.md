## 物理层

### 通信基础

通信系统模型

<img src="https://img-blog.csdnimg.cn/20210112191833122.png" alt="image-20210102155124364"  width="50%" />

* 信源：将各种信息转换成原始物理信号，如计算机，手机，电话机等。
* 变换器/反变换器：对原始物理信号进行变换/反变换，以便适合在给定的信道上传输，如MODEM ， TA(终端适配器) ，光/电转换器等。
* 信道：传输信号的一条通路。一条物理线路可构成一个或多个信道。
* 噪声源：信道自身的噪声以及周围环境对信道的干扰。如热噪声，闪电，电磁场干扰等。
* 信宿：将物理信号转换为信息，如计算机，手机，电话机等。



#### 信号与信道

模拟通信与数字通信

* 模拟信号: 信号在传输过程中连续变化。
* 数字信号: 信号在传输过程中离散变化。
  * 优点：抗干扰能力强、适合远距离传输、有利于安全性、适合多媒体信息传输。



信号带宽

* 信号带宽: 信号能量所集中的频率范围（频谱）。

  * 例如：语音信号占用的频率谱为300-3400Hz,那么带宽为3400-300=3100Hz
* 对数字信号,带宽 H 可近似表示为：H =1/τ

  * τ为脉冲宽度；数据率越高，脉宽越窄，数字信号的带宽越大。





信道

* 信道

  * 信道：传输信号的一条通路。
  * 信道通常由物理传输介质和通信设备（如MODEM，中继器，均衡器）组成。
  * 一条物理线路可同时复用多个信道。

* 衡量信道质量的两个重要参数

  * 信道的带宽。
  * 信道的误码率。

* 信道带宽

  * 信道带宽：信道允许传输信号的频率范围，单位为Hz。如普通电话线的带宽是4000Hz。
  * 对数字通信，通常用数据率来表示带宽。数据率：信道每秒最多传输的二进制位数，单位为bps。

* 信道带宽与数据率的关系

  * 奈奎斯特定理（无噪声信道）：C=$2H log_2L$ (bps)

    其中，C为信道的数据率（即容量）；H为信道带宽；L为数字信号的离散取值数目。

  * 香农定理（有噪声信道，Ｌ不受限）：C=$Hlog_2(1+S/N)$ ( bps)

    其中，S为信号功率，N为噪音功率，S/N为信噪比。

  * 例：H=4000Hz，S/N =1023, L=8； 求C。

    解：（1）由奈奎斯特定理：C=2H$log_2Ｌ$=2×4000$log_28$=24000 （bps）

    ​        （2）由香农定理：C = H$log_2(1+S/N)$ =4000$log_2(1+1023)$= 40000bps

    ​         所以，信道最大数据率为24000bps

* 波特率

  * 波特率又称码元速率，是指每秒传输码元的数目，单位为波特（Baud）。

  * 若码元的离散取值数目为L，波特率为B，数据率为C，则：C = B$log_2L$

* 误码率

  * 误码率：数字信号比特（二进制位）在传输过程中出错的概率。
  * P = Ne/N，其中 P为误码率；Ne为出错的比特数；N为传输的总比特数。

* 信道的通信方向

  * 单工信道：只允许数据信号在信道上的单向传输。如：无线电广播，电视。

  * 半双工信道：数据信号可以在信道上双向传输，但同一时刻只允许单向传输。如：无线对讲机。

  * 全双工信道：允许数据同时双向传输。如：计算机通信。



#### 传输媒介

双绞线

* 非屏蔽双绞线（UTP）

  <img src="https://img-blog.csdnimg.cn/20210112191858654.png" alt="image-20210102161849473"  width="30%" />

  * 三类UTP：100Ω, 100m,10Mbps，用于10BASE-T以太网。
  * 五类UTP（目前常用）：100Ω, 100m,100Mbps，用于100BASE-T以太网。
  * 超五类UTP：100Ω, 80m,1000Mbps，用于千兆以太网。
  * 六类UTP：100Ω, 100m,1000Mbps，用于千兆以太网。

* 屏蔽双绞线（STP）

  <img src="https://img-blog.csdnimg.cn/20210112191922407.png" alt="image-20210102161915404"  width="30%" />

  * 抗干扰性能好。
  * 价格昂贵、安装麻烦。



同轴电缆

<img src="https://img-blog.csdnimg.cn/2021011219194699.png" alt="image-20210102161949286"  width="40%"/>

* 同轴电缆中央是一根铜导线，外包一层绝缘材料，这层绝缘材料又被第二层网状导体裹住，以屏蔽外界电磁干扰 。
* 与双绞线相比，同轴电缆传输距离长，抗干扰能力强，但价格贵，布线麻烦。
* 基带同轴电缆（50Ω）
  * 粗缆: 10BASE-5
  * 细缆: 10BASE-2

* 宽带同轴电缆（75Ω）
  * 用于闭路电视。



光纤

<img src="https://img-blog.csdnimg.cn/20210112192011115.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkzNDYwNw==,size_16,color_FFFFFF,t_70" alt="image-20210102162143992"  width="30%" />

* 光纤的中央是一根直径几十微米光导玻璃，外面用一层玻璃体包住，最外层是塑料保护层。多根光纤由外包层包裹在一起构成光缆。

* 光纤分为单模光纤和多模光纤两类。
* 单模光纤
  * 光线主要沿着光线的轴心向前传输
  * 单模光纤传输距离较长，但对光源要求高。

* 多模光纤
  * 光线沿着光纤以多种角度被包层反射向前传输。
  * 多模光纤传输距离较短，但对光源要求不高。

* 光纤优点：容量大：可达几百Gbps ；距离远：100km（无需中继）；抗干扰能力强：不受外部电磁场干扰；化学性质稳定。



无线传输媒体

* 无线传输以自由空间作为传输媒体，主要包括无线电波、微波、卫星通信、激光、红外线等。

* 无线电波的传播特性
  * 低中频：能够绕过障碍物（绕射）；能量随距离增加而急剧减少，传输距离有限。
  * 高频和甚高频：能量会被地表吸收；但能通过电离层反射。
  * 超高频和特超高频（微波）：只能直线传播；既不能绕射也不能反射。



微波

* 微波频率大致为1GHz — 100GHz
* 用于无线局域网的微波频率范围为：2.4GHz — 2.484GHz、5.725GHz — 5.825 GHz、18.825GHz — 19.205GHz
* 微波通信必须要有微波中继站：100m高，相距小于80km 。



卫星通信

* 卫星通信是一种特殊的微波通信，同步通信卫星作为微波中继站
* 与地面中继站相比，卫星的通信距离远，从理论上讲，三个同步卫星就能覆盖整个地球表面。
* 卫星通信的特点：传输延迟长达270ms；通信费用与距离无关；抗干扰能力差，甚至雨水也能吸收微波能量





#### 变换器

数字信号的编码（怎么把 out 到网卡的 0 和 1 转为数字信号）

* 非归零编码（NRE: Non-Return to Zero）

  * 以高电平表示“0”，低电平表示“1”，反之亦然。
  * 优点：编/译码简单。
  * 缺点：内部不含时钟信号，收/发端同步困难。
  * 用途：计算机内部，或低速数据通信。

* 曼彻斯特编码（Manchester Encoding）

  * 每一位中间有一次跳变，既表示数据，又作为同步信号。从高电平跳变到低电平表示“0”，从低电平跳变到高电平表示“1”；反之亦然。

  * 优点：内部自含时钟，收/发端同步容易；抗干扰能力强。
  * 缺点：编/译码较复杂；占用更多的信道带宽，在同样的波特率的情况下，要比非归零编码多占用一倍信道带宽。
  * 用途：802.3局域网（以太网）

* 差分曼彻斯特编码

  * 每一位中间也有一次跳变，但这种跳变仅作为同步信号，不表示数据。数据值通过每位开始时有无跳变来表示；有跳变表示“0”，无跳变表示“1”；反之亦然。
  * 优点：内部自含时钟，收/发端同步容易；比曼彻斯特编码的抗干扰能力更强
* 缺点：编/译码更复杂；同样需要多占用一倍信道带宽。
  * 用途：802.5局域网（令牌环网）



数据同步方式

* 同步：接收端按发送端发送代码的频率和起止时间来接收数据。

* 字符同步方式（异步通信）：仅针对一个字符内所含的二进制位进行同步。

  <img src="https://img-blog.csdnimg.cn/20210112192035124.png" alt="image-20210102170954904"  width="40%" />

  * 起始位为低电平（1位），标志一个字符的开始；停止位为高电平（1.5或2 位），标志一个字符的结束。
  * 优点：时钟漂移被限制在一个字符内，不会产生太大的积累误差。因此对同步精度要求不高，同步容易。
  * 缺点：每个字符均有起始/停止位，因而传输效率较低。
  * 适用：低速通信。

* 位同步（同步通信）：针对一个数据块内所含的二进制位进行同步。

  * 同步位模式：通常为“01111110”，标志一个数据块的开始和结束。

  * 优点：每个数据块仅需要2个同步位模式的额外开销，因而传输效率高。

  * 缺点：由于一个数据块所含位数较多，易产生时钟漂移积累误差而导致数据出错，因此对同步精度求高，同步困难。

    例：设数据块 为1K字节，则每次连续同步位数为1024x8=8192位。

  * 适用：高速通信。

  * 实现位同步的两种方法：

    * 外同步：为发送端和接收端提供专门的同步时钟信号。

    * 内同步：不单独发同步时钟信号，而是将同步信号嵌入数据编码内部， 如曼彻斯特编码或差分曼彻斯特编码。





数字调制技术（数/模转化）

<img src="https://img-blog.csdnimg.cn/20210112192055105.png" alt="image-20210102165647906"  width="50%" />

* 数字信号的模拟传输

  * 基带信号：由信源产生的原始电信号。

  * 载波：频率较高的正弦波信号。

  * 调制：将基带信号加载到载波上，即按基带信号的变化规律去改变载波的某些参数（振幅、频率、相位）。
  * 解调：从载波中提取基带信号。

* 调制技术

  <img src="https://img-blog.csdnimg.cn/20210112192117795.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkzNDYwNw==,size_16,color_FFFFFF,t_70" alt="image-20210102165505349"  width="40%" />

  * 调幅：用载波信号不同振幅表示数据,，又称幅移键控法ASK。易受突发干扰，适合低速数据传输，典型为1200bps。

  * 调频: 用载波信号不同频率表示数据，又称频移键控法FSK 。抗干扰优于调幅方式，但频带利用率不高。

  * 调相：用载波信号不同相位表示数据，又称相移键控法PSK。抗干扰能力强，数据率高，可达9600bps。

* 实际调制/解调器通常将调相技术和调幅技术相结合





拟信号的脉码调制（模/数转化）

<img src="https://img-blog.csdnimg.cn/20210112191747871.png" alt="image-20210102165744777"  width="40%"/>

* 模拟信号的数字传输：模拟信号转化为数字信号，然后通过数字信道传输。

* 脉码调制（PCM，Pulse Code Modullation）：最常用的数/模转化技术；

  * 步骤：采样、量化、编码。

    * 采样：按照一定的时间间隔测量模拟信号幅值 。

      采样定理：若模拟信号的带宽为H，则采用频率B只要大于或等于2H就 能够恢复原模拟信号。即： B≥2H

      例：电话语音信号带宽为4000Hz，则采样频率可取每秒8000次。（或每125us采样一次）。

    * 量化：将采样点测得的信号幅值分级取整。

      * 设数字信号的离散分级数目为2n，则将采样值按0，1，2，…，2n-1进 行 取整。
      * 量化误差：量化取整值与实际幅值之间的误差。

    * 编码：将量化后的整数值用n位二进制数表示 。

  * PCM编码举例

    * 设数字信号的离散分级数目为$2^3$ =8，编码长度n=3

    <img src="https://img-blog.csdnimg.cn/202101121918127.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkzNDYwNw==,size_16,color_FFFFFF,t_70" alt="image-20210102170513401"  width="40%" />

  * 结论

  * 分级越多，误差越小，但每个采样值编码所需的比特数就越多。

* 差分脉码调制

  * 其输出值不是量化值本身，而是当前值和上一个值之差。
  * 具有压缩作用 。
    例：如果按128级量化， PCM需要7个比特编码。但对多数模拟信号来 讲， 相邻采样点的差值大于16 的可能性非常小，所以只要4个比特编码就可以 了，而不需要7个比特。





多路复用技术

* 多路复用：将多个信道复用在一条物理线路上，使一条物理线路能够同时传输多路数据信号。

* 多路复用技术分类
  * 频分多路复用（FDM）
  * 时分多路复用（TDM）
  * 统计时分多路复用（统计TDM）

* 频分多路复用：将一条物理线路的总带宽分割成若干个较小带宽的子信道，每个子信道传输一路信号。
  * 子信道分割技术：将不同信号加载到不同载波上，实现信号频移
  * 频分多路复用的典型应用：电话中继线。

* 时分多路复用:将一条高速物理线路的传输时间划分成若干相等的时间片，轮流的为多路信号使用 。
  * 数据不丢失条件 CH≥∑Ci，其中CH为高速线路容量（数据率）， Ci为低速线路容量。
  * 缺点：没有数据传输的低速线路仍分配时间片，可能出现空闲的时间片，浪费信道带宽。
  * 时分多路复用的典型应用：T1信道。

* 统计时分多路复用: 采用动态分配时间策略，即有数据要传输的线路才分配时间片。
  * 允许 CH <∑Ci
  * 优点：不会出现空闲的时间片，信道利用率高。



### 物理层协议

物理层协议实际上就是通信接口标准，其意义是：只要遵循相同的 通信接口标准，任何DTE和DCE均能够衔接而无需关心对方的实现细节。



物理层协议涉及的内容

* 机械特性：规定接口的扦头（座）的规格，尺寸，扦脚数目等。
* 功能特性：对接口各信号线的功能和作用进行定义和说明。
* 规程特性：规定各信号线之间的相互关系，动作发生的先后次序。
* 电气特性：规定信号的传输速率，电平关系，负载要求和电缆长度等。
